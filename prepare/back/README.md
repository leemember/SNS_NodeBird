# 🤍 BackEnd 작업

### **🎀 실행코드**

```
$nodemon app
```

## 1. 노드로 서버 구동하기

> 노드는 서버가 아니라 자바스크립트 코드를 실행할 수 있게 해주는 런타임이다! <br>
> 서버가 아니어도 http를 제공해준다.

<br>

### BackEnd 작업 환경설정

```
$npm init
----------------------------------
package name : react-nodebird-back
(...전부 엔터)
author : 내이름
```

<br>

👇🏻 이런 서버를 불러오는 작업은 프론트에서도 작업이 가능한데 대규모 프로젝트를 위해서 백을 구현하는 것이다.

```
function loadPostsAPI(data) {
  return axios.post('/api/posts', data);
}
```

### **데이터 흐름 구성도**

- front => SSR (서버사이드렌더링) : 화면에 렌더링 해주는거

- BACK => API (데이터 불러오기)

<br>

---

<br>

## 2. 익스프레스로 라우팅하기

- 포스트맨 설치 : https://www.postman.com/downloads/

```
$npm i express
```

노드의 api는 대부분 JSON으로 응답한다.

<br>

#### ✨라우터를 만드는 이유는 Front에서 여러 요청을 해올테니 backEnd 라우터도 다양하게 만드는 것이다.

<br>

```
app.get('/', (req, res) => {
  res.send('helloe express');
});
```

| **app.이벤트** | **설명**                    |
| :------------- | :-------------------------- |
| app.get        | 가져오다                    |
| app.post       | 생성하다                    |
| app.put        | 전체 수정                   |
| app.delete     | 제거                        |
| app.patch      | 부분 수정                   |
| app.options    | 찔러보기                    |
| app.head       | 헤더만 가져오기 (헤더/바디) |

<br>

---

<br>

## 3. MySQL과 시퀄라이즈 연결하기

- MySQL 다운로드 : https://www.mysql.com/downloads/
- MySQL 설치방법 : https://thebook.io/080229/ch07/02/

<br>

> MySQL 세팅 후 밑에 라이브러리 설치

```
$npm i sequelize sequelize-cli mysql2
```

**- mysql2** : 노드랑 mysql을 연결해주는 드라이버다.

**- sequelize** : SQL언어를 따로 배우지 않아도 자바스크립트 만으로도 SQL을 조작할 수 있게 도와주는 라이브러리다.

<br>

> 시퀄라이즈 세팅이 되는 명령어

```
$npx sequelize init
```

시퀄라이즈를 설치하고 나면 config에다가 개발, 테스트, 배포용의 json이 들어있다.

```
"development": {
    "username": "root",
    "password": "nodejsbook",
    "database": "react-nodebird",
    "host": "127.0.0.1",
    "dialect": "mysql"
  }, 
```
이 부분이 config이다.


---------

## http 상태코드 정리

### 100 - 199 : 정보성 상태 코드
정보성 상태 코드는 HTTP/1.1 에서 도입되어 비교적 새로운 것이며, 복잡함을 감수할 만큼 가치가 있는지에 대해 논란이 되고 있다.

- 100 : 요청의 시작 부분 일부가 받아들여졌으며, 클라이언트는 나머지를 계속 이어서 보내야 함을 의미함

- 101 : 요청자가 서버에 프로토콜 전환을 요청했으며, 서버에서 이를 승인하는 중을 의미함

- 200 - 299 : 성공 상태 코드
클라이언트가 요청을 보내면, 요청은 대게 성공함. 서버는 대응하는 성공을 의미하는 각각의 요청에 대응한다.

- 200 : 요청은 정상이고, 본문은 요청된 리소스를 포함하고 있다.

- 201 : 어떠한 생성 작업을 요청받았으며, 생성 작업을 성공하였다.

- 202 : 요청은 받아들여졌으나, 아직 동작을 수행하지 않은 상태로 요청이 적절함을 의미함

- 203 : 요청을 성공하였지만, 요청에 대한 검증이 되지 않은 상태를 의미함

- 204 : 요청을 성공하였지만, 제공할 내용이 없음을 의미

- 205 : 204와 동일하지만 새로고침등을 통해 새로운 내용등을 확인할것을 추가로 의미

- 206 : 요청의 일부분만 성공하였음을 의미

- 300 ~ 399 : 리다이렉션 상태 코드
클라이언트에 요청에 대해 적절한 다른 위치를 제공하거나, 대안의 응답을 제공한다.

- 300 : 클라이언트가 동시에 여러 응답을 가리키는 URL을 요청한 경우 응답 목록과 함께 반환된다.(ex] 어떠한 HTML에 문서에 대한 영문페이지와 불어페이지를 요청)

- 301 : 요청한 URL이 옮겨졌을 때 사용. 옮겨진 URL에 대한 정보와 함께 응답되어야 한다.

- 302 : 301과 동일하나, 클라이언트는 여전히 옮겨지기전 URL로 요청할것을 의미

- 303 : 요청받은 행동 수행을 위해서는 다른 URL로 요청 해야함을 의미

- 304 : 이전의 동일한 요청과 비교하여 변화가 없음을 의미(단시간에 반복된 동일 요청에 대한 대응 코드)

- 305 : 직접적인 요청이 아니라 반드시 프락시(우회경로)를 통해 요청되어야 함을 의미

- 307 : 302와 동일하며, HTTP Method도 변경없이 요청하여야 함을 의미

- 400 - 499 : 클라이언트 에러 상태 코드
클라이언트의 잘못된 요청에 대한 대응 코드

- 400 : 클라이언트가 올바르지 못한 요청을 보내고 있음을 의미

- 401 : 요청을 위해서는 권한 인증등을 요구함을 의미

- 403 : 요청이 서버에 의해 거부 되었음을 의미, 서버는 거부 이유를 포함하여 응답할 수 있지만, 보통은 거부 이유를 숨기고 싶을 때 사용된다.

- 404 : 요청한 URL을 찾을 수 없음을 의미

- 405 : 요청한 URL이 Method를 지원하지 않음을 의미(ex] POST요청에 대한 응답을 하는 URL에 GET으로 요청)

- 406 : 클라이언트 요청에 대해 적절한 컨텐츠가 없음을 의미

- 407 : 401과 동일하나, 프락시(우회경로)를 통하여 인증 할 것을 요구함을 의미

- 408 : 요청에 응답하는 시간이 너무 많은 시간이 걸림을 의미(서버는 요청을 끊을수 있음)

- 409 : 클라이언트 요청에 대해 서버에서 충돌 요소가 발생 할수 있음을 의미

- 410 : 요청한 URL이 더 이상 사용되지 않고 사라졌음을 의미

- 411 : 클라이언트 요청에 Content-length 헤더가 포함되어야 함을 의미

- 412 : 클라이언트가 조건부 요청을 했는데 그중 하나가 실패하였음을 의미

- 413 : 요청이 너무 커서 서버가 처리 할 수 없음을 의미

- 414 : 요청 URL이 너무 길어 처리 할 수 없음을 의미

- 415 : 서버가 이해 하지 못하는 유형의 컨텐츠를 요청 하였음을 의미

- 416 : 클라이언트의 요청 내용이 범위가 잘못되었음을 의미

- 417 : 클라이언트 요청 헤더의 Expect에 대해 서버가 만족 하지 않음을 의미

- 500 - 599 : 서버 에러 상태 코드
올바른 클라이언트 요청에 대해 서버의 문제로 응답 할 수 없음을 의미

- 500 : 서버에 오류가 발생하여 응답 할 수 없음을 의미

- 501 : 클라이언트 요청에 대한 서버의 응답 수행 기능이 없음을 의미(ex] 서버가 지원하지 않는 새로운 Method를 사용하여 요청 - GET2, POST2...)

- 502 : 프락시나 게이트웨이등의 서버에서 응답하며, 서버의 모(엄마)서버에서 오류가 발생하였음을 의미

- 503 : 현재 서버가 유지보수 등의 이유로 일시적인 사용 불가함을 의미

- 504 : 서버에서 다른 서버로 요청을 보냈으나, 응답 지연이 발생하여 처리가 불가함을 의미

- 505 : 서버가 지원할 수 없거나 올바르지 못한 프로토콜로 요청을 받았음을 의미

- 600이상~
개발자가 아님을 의미~